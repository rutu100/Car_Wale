{% extends 'base.html' %}

{% block title %}My Test Drives{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">

  <h3 class="text-center mb-4">ðŸš— My Test Drives</h3>

  <div class="table-responsive">
    <table class="table table-bordered text-center align-middle">
      <thead class="table-light">
        <tr>
          <th>Car</th>
          <th>Date</th>
          <th>Slot</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        {% for drive in drives %}
        <tr>
          <td>{{ drive.car.name }}</td>
          <td>{{ drive.preferred_date }}</td>
          <td>{{ drive.preferred_slot }}</td>

          <td>
            {% if drive.status == "Approved" %}
              <span class="badge bg-success">Approved</span>
            {% elif drive.status == "Rejected" %}
              <span class="badge bg-danger">Rejected</span>
            {% elif drive.status == "Cancelled" %}
              <span class="badge bg-secondary">Cancelled</span>
            {% else %}
              <span class="badge bg-warning text-dark">Pending</span>
            {% endif %}
          </td>

          <td>
            {% if drive.status == "Pending" %}
              <a href="{% url 'cancel_test_drive' drive.id %}"
                 class="btn btn-sm btn-outline-danger"
                 onclick="return confirm('Are you sure you want to cancel this test drive?');">
                Cancel
              </a>
            {% else %}
              â€”
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-muted">
            No test drives booked ðŸš˜
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
